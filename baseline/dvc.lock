schema: '2.0'
stages:
  train@effnet_s:
    cmd: python -m src.train --model effnet_s --config baseline/params.yaml 
      --output_dir baseline/effnet_s
    deps:
    - path: data/split/train
      hash: md5
      md5: 3722dfc0fe24b6bc63e77927dba07a7b.dir
      size: 156677811
      nfiles: 2953
    - path: data/split/val
      hash: md5
      md5: aa1ee861ad552d1a00bc7136164398d8.dir
      size: 33725765
      nfiles: 634
    - path: src/common.py
      hash: md5
      md5: 982ff7965ce4a9c5361297352ceed080
      size: 3842
    - path: src/train.py
      hash: md5
      md5: b2c125c5e896e0ca925e0644bb457a0f
      size: 4118
    params:
      baseline/params.yaml:
        base:
          image_res: 224
        data:
          trainset_path: data/split/train
          valset_path: data/split/val
          testset_path: data/split/test
        train:
          lr: 0.001
          epochs: 4
          batch_size: 16
    outs:
    - path: baseline/effnet_s/loss.json
      hash: md5
      md5: dd7adcbc53848bea982e8efe73dad0ce
      size: 456
    - path: baseline/effnet_s/model.pth
      hash: md5
      md5: c9f38a864ccecde5d5c03752041e7c26
      size: 81596987
  train@convnext:
    cmd: python -m src.train --model convnext --config baseline/params.yaml 
      --output_dir baseline/convnext
    deps:
    - path: data/split/train
      hash: md5
      md5: 3722dfc0fe24b6bc63e77927dba07a7b.dir
      size: 156677811
      nfiles: 2953
    - path: data/split/val
      hash: md5
      md5: aa1ee861ad552d1a00bc7136164398d8.dir
      size: 33725765
      nfiles: 634
    - path: src/common.py
      hash: md5
      md5: 982ff7965ce4a9c5361297352ceed080
      size: 3842
    - path: src/train.py
      hash: md5
      md5: b2c125c5e896e0ca925e0644bb457a0f
      size: 4118
    params:
      baseline/params.yaml:
        base:
          image_res: 224
        data:
          trainset_path: data/split/train
          valset_path: data/split/val
          testset_path: data/split/test
        train:
          lr: 0.001
          epochs: 4
          batch_size: 16
    outs:
    - path: baseline/convnext/loss.json
      hash: md5
      md5: e3aa7768ead2b6b9c6bd6dbf589a28c8
      size: 456
    - path: baseline/convnext/model.pth
      hash: md5
      md5: 8dcec823e15ba1dad197758d60c2045d
      size: 111353691
  train@effnet_m:
    cmd: python -m src.train --model effnet_m --config baseline/params.yaml 
      --output_dir baseline/effnet_m
    deps:
    - path: data/split/train
      hash: md5
      md5: 3722dfc0fe24b6bc63e77927dba07a7b.dir
      size: 156677811
      nfiles: 2953
    - path: data/split/val
      hash: md5
      md5: aa1ee861ad552d1a00bc7136164398d8.dir
      size: 33725765
      nfiles: 634
    - path: src/common.py
      hash: md5
      md5: 982ff7965ce4a9c5361297352ceed080
      size: 3842
    - path: src/train.py
      hash: md5
      md5: b2c125c5e896e0ca925e0644bb457a0f
      size: 4118
    params:
      baseline/params.yaml:
        base:
          image_res: 224
        data:
          trainset_path: data/split/train
          valset_path: data/split/val
          testset_path: data/split/test
        train:
          lr: 0.001
          epochs: 4
          batch_size: 16
    outs:
    - path: baseline/effnet_m/loss.json
      hash: md5
      md5: f6eba4529d17b6867e943739ea9fd674
      size: 457
    - path: baseline/effnet_m/model.pth
      hash: md5
      md5: b8d16817b7168f402207aeca0d8d118a
      size: 212984427
  evaluate@effnet_m:
    cmd: python -m src.evaluate --model effnet_m --config baseline/params.yaml 
      --output_dir baseline/effnet_m
    deps:
    - path: baseline/effnet_m/model.pth
      hash: md5
      md5: b8d16817b7168f402207aeca0d8d118a
      size: 212984427
    - path: data/split/test
      hash: md5
      md5: d7675a3f7fb90cbdfff2fa7fcaff688f.dir
      size: 34292589
      nfiles: 636
    - path: src/common.py
      hash: md5
      md5: 982ff7965ce4a9c5361297352ceed080
      size: 3842
    - path: src/evaluate.py
      hash: md5
      md5: 6060cbf6f9e817ddba70ad03f7a2c60d
      size: 3473
    params:
      baseline/params.yaml:
        base:
          image_res: 224
        data:
          trainset_path: data/split/train
          valset_path: data/split/val
          testset_path: data/split/test
        evaluate:
          batch_size: 16
    outs:
    - path: baseline/effnet_m/cm_data.csv
      hash: md5
      md5: 1c990930266b8a6ebe0e17aaac0eb4ff
      size: 15057
    - path: baseline/effnet_m/metrics.json
      hash: md5
      md5: daad3a56392e7460005041f8827fa73a
      size: 100
  evaluate@convnext:
    cmd: python -m src.evaluate --model convnext --config baseline/params.yaml 
      --output_dir baseline/convnext
    deps:
    - path: baseline/convnext/model.pth
      hash: md5
      md5: 8dcec823e15ba1dad197758d60c2045d
      size: 111353691
    - path: data/split/test
      hash: md5
      md5: d7675a3f7fb90cbdfff2fa7fcaff688f.dir
      size: 34292589
      nfiles: 636
    - path: src/common.py
      hash: md5
      md5: 982ff7965ce4a9c5361297352ceed080
      size: 3842
    - path: src/evaluate.py
      hash: md5
      md5: 6060cbf6f9e817ddba70ad03f7a2c60d
      size: 3473
    params:
      baseline/params.yaml:
        base:
          image_res: 224
        data:
          trainset_path: data/split/train
          valset_path: data/split/val
          testset_path: data/split/test
        evaluate:
          batch_size: 16
    outs:
    - path: baseline/convnext/cm_data.csv
      hash: md5
      md5: 6f05d03394e6aa8db39d756b8b67b87b
      size: 14923
    - path: baseline/convnext/metrics.json
      hash: md5
      md5: 5005249d6105b98375b90c3e52b86b30
      size: 100
  evaluate@effnet_s:
    cmd: python -m src.evaluate --model effnet_s --config baseline/params.yaml 
      --output_dir baseline/effnet_s
    deps:
    - path: baseline/effnet_s/model.pth
      hash: md5
      md5: c9f38a864ccecde5d5c03752041e7c26
      size: 81596987
    - path: data/split/test
      hash: md5
      md5: d7675a3f7fb90cbdfff2fa7fcaff688f.dir
      size: 34292589
      nfiles: 636
    - path: src/common.py
      hash: md5
      md5: 982ff7965ce4a9c5361297352ceed080
      size: 3842
    - path: src/evaluate.py
      hash: md5
      md5: 6060cbf6f9e817ddba70ad03f7a2c60d
      size: 3473
    params:
      baseline/params.yaml:
        base:
          image_res: 224
        data:
          trainset_path: data/split/train
          valset_path: data/split/val
          testset_path: data/split/test
        evaluate:
          batch_size: 16
    outs:
    - path: baseline/effnet_s/cm_data.csv
      hash: md5
      md5: 0b4657ef869c69e9ac08f3011ad49024
      size: 14786
    - path: baseline/effnet_s/metrics.json
      hash: md5
      md5: 6153adc4cc714257c976cdbc76a3840d
      size: 100
