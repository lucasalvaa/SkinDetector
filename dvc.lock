schema: '2.0'
stages:
  train_p1@effnet_s:
    cmd: python -m src.train --model effnet_s --data data/split/train --out 
      models/p1/effnet_s --batch 16 --epochs 4
    deps:
    - path: data/split/train
      hash: md5
      md5: e47f4ce8e557b91734b948be2b5782c9.dir
      size: 161152912
      nfiles: 3047
    - path: src/common.py
      hash: md5
      md5: 6917c0ffa3fb7f9968bafced100c778c
      size: 2098
    - path: src/train.py
      hash: md5
      md5: eec726cb405311f3c98c85b2b7b7662c
      size: 4015
    outs:
    - path: models/p1/effnet_s/history.json
      hash: md5
      md5: e1babe8f7136bc6965ac83e34e7e587d
      size: 190
    - path: models/p1/effnet_s/loss_plot.png
      hash: md5
      md5: b20200177b5af573850548500eb04ef3
      size: 44543
    - path: models/p1/effnet_s/model.pth
      hash: md5
      md5: ae1644b3bdcc56b9faf333e5b35ba548
      size: 81596987
  train_p1@effnet_m:
    cmd: python -m src.train --model effnet_m --data data/split/train --out 
      models/p1/effnet_m --batch 16 --epochs 4
    deps:
    - path: data/split/train
      hash: md5
      md5: e47f4ce8e557b91734b948be2b5782c9.dir
      size: 161152912
      nfiles: 3047
    - path: src/common.py
      hash: md5
      md5: 6917c0ffa3fb7f9968bafced100c778c
      size: 2098
    - path: src/train.py
      hash: md5
      md5: eec726cb405311f3c98c85b2b7b7662c
      size: 4015
    outs:
    - path: models/p1/effnet_m/history.json
      hash: md5
      md5: 4623a046203d20761dbb494599a423b6
      size: 188
    - path: models/p1/effnet_m/loss_plot.png
      hash: md5
      md5: bfbae4f179cc212999b140affdb25463
      size: 45111
    - path: models/p1/effnet_m/model.pth
      hash: md5
      md5: 6b1e1194003b5afcf5676ae5617fd38a
      size: 212984427
  train_p1@effnet_l:
    cmd: python -m src.train --model effnet_l --data data/split/train --out 
      models/p1/effnet_l --batch 4 --acc_steps 4
    deps:
    - path: data/split/train
      hash: md5
      md5: e47f4ce8e557b91734b948be2b5782c9.dir
      size: 161152912
      nfiles: 3047
    - path: src/common.py
      hash: md5
      md5: 6917c0ffa3fb7f9968bafced100c778c
      size: 2098
    - path: src/train.py
      hash: md5
      md5: 1462c397b8d6b26f9bb1b24ac26a96b9
      size: 2736
    outs:
    - path: models/p1/effnet_l/model.pth
      hash: md5
      md5: 999e0b4f736d9c9e594d720d015bbb9c
      size: 471525927
  train_p1@convnext:
    cmd: python -m src.train --model convnext --data data/split/train --out 
      models/p1/convnext --batch 16 --epochs 4
    deps:
    - path: data/split/train
      hash: md5
      md5: e47f4ce8e557b91734b948be2b5782c9.dir
      size: 161152912
      nfiles: 3047
    - path: src/common.py
      hash: md5
      md5: 6917c0ffa3fb7f9968bafced100c778c
      size: 2098
    - path: src/train.py
      hash: md5
      md5: eec726cb405311f3c98c85b2b7b7662c
      size: 4015
    outs:
    - path: models/p1/convnext/history.json
      hash: md5
      md5: 4af8634e78508601f7773e87c340cfad
      size: 188
    - path: models/p1/convnext/loss_plot.png
      hash: md5
      md5: dcf822242c7e21780a5479fde64ee616
      size: 47518
    - path: models/p1/convnext/model.pth
      hash: md5
      md5: 655f19fa1352764a17c9489b18dacb91
      size: 111353691
  evaluate_p1@effnet_s:
    cmd: python -m src.test --model effnet_s --data data/split/train --out 
      models/p1/effnet_s --batch 8
    deps:
    - path: data/split/test
      hash: md5
      md5: 945a27c58daecb59e6930a493ea6dd92.dir
      size: 35024696
      nfiles: 656
    - path: models/p1/effnet_s/model.pth
      hash: md5
      md5: ae1644b3bdcc56b9faf333e5b35ba548
      size: 81596987
    - path: src/common.py
      hash: md5
      md5: 6917c0ffa3fb7f9968bafced100c778c
      size: 2098
    - path: src/test.py
      hash: md5
      md5: 9ea41411bf874d705ca0d3ddefb66075
      size: 2581
    outs:
    - path: models/p1/effnet_s/metrics.json
      hash: md5
      md5: 86a0df1f25c02e9977fce8679be5b0c9
      size: 64
    - path: models/p1/effnet_s/test_confusion_matrix.png
      hash: md5
      md5: 8afc309e6d4691ca6925e9ef820e23f2
      size: 45706
  evaluate_p1@effnet_m:
    cmd: python -m src.test --model effnet_m --data data/split/train --out 
      models/p1/effnet_m --batch 8
    deps:
    - path: data/split/test
      hash: md5
      md5: 945a27c58daecb59e6930a493ea6dd92.dir
      size: 35024696
      nfiles: 656
    - path: models/p1/effnet_m/model.pth
      hash: md5
      md5: 6b1e1194003b5afcf5676ae5617fd38a
      size: 212984427
    - path: src/common.py
      hash: md5
      md5: 6917c0ffa3fb7f9968bafced100c778c
      size: 2098
    - path: src/test.py
      hash: md5
      md5: 9ea41411bf874d705ca0d3ddefb66075
      size: 2581
    outs:
    - path: models/p1/effnet_m/metrics.json
      hash: md5
      md5: e758370a78468581ab5cf952c3bbe670
      size: 63
    - path: models/p1/effnet_m/test_confusion_matrix.png
      hash: md5
      md5: 995976e37ddbf27cd1ccb5f70ff8e0b8
      size: 46349
  evaluate_p1@effnet_l:
    cmd: python -m src.test --model effnet_l --data data/split/train --out 
      models/p1/effnet_l --batch 8
    deps:
    - path: data/split/test
      hash: md5
      md5: 945a27c58daecb59e6930a493ea6dd92.dir
      size: 35024696
      nfiles: 656
    - path: models/p1/effnet_l/model.pth
      hash: md5
      md5: 999e0b4f736d9c9e594d720d015bbb9c
      size: 471525927
    - path: src/common.py
      hash: md5
      md5: 6917c0ffa3fb7f9968bafced100c778c
      size: 2098
    - path: src/test.py
      hash: md5
      md5: 9ea41411bf874d705ca0d3ddefb66075
      size: 2581
    outs:
    - path: models/p1/effnet_l/metrics.json
      hash: md5
      md5: 079079c5cf6d54a2ca72f1c608922eaa
      size: 64
    - path: models/p1/effnet_l/test_confusion_matrix.png
      hash: md5
      md5: 29692357702df9ece1f7dc7ff4bf7ee0
      size: 46537
  evaluate_p1@convnext:
    cmd: python -m src.test --model convnext --data data/split/train --out 
      models/p1/convnext --batch 8
    deps:
    - path: data/split/test
      hash: md5
      md5: 945a27c58daecb59e6930a493ea6dd92.dir
      size: 35024696
      nfiles: 656
    - path: models/p1/convnext/model.pth
      hash: md5
      md5: 655f19fa1352764a17c9489b18dacb91
      size: 111353691
    - path: src/common.py
      hash: md5
      md5: 6917c0ffa3fb7f9968bafced100c778c
      size: 2098
    - path: src/test.py
      hash: md5
      md5: 9ea41411bf874d705ca0d3ddefb66075
      size: 2581
    outs:
    - path: models/p1/convnext/metrics.json
      hash: md5
      md5: e20960460b40703f9aca7dd385438901
      size: 64
    - path: models/p1/convnext/test_confusion_matrix.png
      hash: md5
      md5: fa78ad43926916be8b5d2155380fc8ab
      size: 47942
