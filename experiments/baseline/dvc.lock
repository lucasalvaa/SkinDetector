schema: '2.0'
stages:
  train@effnet_s:
    cmd: "python -m src.train  pipeline=baseline  model=effnet_s\n"
    deps:
    - path: data/split/train
      hash: md5
      md5: 3722dfc0fe24b6bc63e77927dba07a7b.dir
      size: 156677811
      nfiles: 2953
    - path: data/split/val
      hash: md5
      md5: aa1ee861ad552d1a00bc7136164398d8.dir
      size: 33725765
      nfiles: 634
    - path: src/common.py
      hash: md5
      md5: eebdc02be491d1a283c895659a244fdc
      size: 3543
    - path: src/train.py
      hash: md5
      md5: 5f0c8c5f0f529fc76ad7ca5ecb9a03ec
      size: 4648
    params:
      conf/config.yaml:
        base:
          image_res: 224
          seed: 42
        data:
          valset_path: data/split/val
          testset_path: data/split/test
        defaults:
        - pipeline: baseline
        - model: effnet_s
        - _self_
        evaluate:
          batch_size: 16
        train:
          alpha: 5.0
      conf/model/effnet_s.yaml:
        fullname: efficientnet_v2_s
        layer: 1
        name: effnet_s
        weights: EfficientNet_V2_S_Weights.DEFAULT
      conf/pipeline/baseline.yaml:
        out_dir: baseline/
        train:
          lr: 0.001
          epochs: 4
          batch_size: 16
        trainset_path: data/split/train
        tsft: false
    outs:
    - path: baseline/effnet_s/loss.json
      hash: md5
      md5: 4cf21b2990994ef41fd7281e1369b59e
      size: 230
    - path: baseline/effnet_s/model.pth
      hash: md5
      md5: 3a090dfb169cca63adc6d8e0fc501058
      size: 81596987
  train@convnext:
    cmd: "python -m src.train  pipeline=baseline  model=convnext\n"
    deps:
    - path: data/split/train
      hash: md5
      md5: 3722dfc0fe24b6bc63e77927dba07a7b.dir
      size: 156677811
      nfiles: 2953
    - path: data/split/val
      hash: md5
      md5: aa1ee861ad552d1a00bc7136164398d8.dir
      size: 33725765
      nfiles: 634
    - path: src/common.py
      hash: md5
      md5: eebdc02be491d1a283c895659a244fdc
      size: 3543
    - path: src/train.py
      hash: md5
      md5: 5f0c8c5f0f529fc76ad7ca5ecb9a03ec
      size: 4648
    params:
      conf/config.yaml:
        base:
          image_res: 224
          seed: 42
        data:
          valset_path: data/split/val
          testset_path: data/split/test
        defaults:
        - pipeline: baseline
        - model: effnet_s
        - _self_
        evaluate:
          batch_size: 16
        train:
          alpha: 5.0
      conf/model/convnext.yaml:
        fullname: convnext_base
        layer: 2
        name: convnext
        weights: ConvNeXt_Base_Weights.DEFAULT
      conf/pipeline/baseline.yaml:
        out_dir: baseline/
        train:
          lr: 0.001
          epochs: 4
          batch_size: 16
        trainset_path: data/split/train
        tsft: false
    outs:
    - path: baseline/convnext/loss.json
      hash: md5
      md5: 43a5e09ccfe1ee6fbabc0091cc12a78e
      size: 457
    - path: baseline/convnext/model.pth
      hash: md5
      md5: 94539927288e926eb083e085c36dcd49
      size: 350394259
  train@effnet_m:
    cmd: "python -m src.train  pipeline=baseline  model=effnet_m\n"
    deps:
    - path: data/split/train
      hash: md5
      md5: 3722dfc0fe24b6bc63e77927dba07a7b.dir
      size: 156677811
      nfiles: 2953
    - path: data/split/val
      hash: md5
      md5: aa1ee861ad552d1a00bc7136164398d8.dir
      size: 33725765
      nfiles: 634
    - path: src/common.py
      hash: md5
      md5: eebdc02be491d1a283c895659a244fdc
      size: 3543
    - path: src/train.py
      hash: md5
      md5: 5f0c8c5f0f529fc76ad7ca5ecb9a03ec
      size: 4648
    params:
      conf/config.yaml:
        base:
          image_res: 224
          seed: 42
        data:
          valset_path: data/split/val
          testset_path: data/split/test
        defaults:
        - pipeline: baseline
        - model: effnet_s
        - _self_
        evaluate:
          batch_size: 16
        train:
          alpha: 5.0
      conf/model/effnet_m.yaml:
        fullname: efficientnet_v2_m
        layer: 1
        name: effnet_m
        weights: EfficientNet_V2_M_Weights.DEFAULT
      conf/pipeline/baseline.yaml:
        out_dir: baseline/
        train:
          lr: 0.001
          epochs: 4
          batch_size: 16
        trainset_path: data/split/train
        tsft: false
    outs:
    - path: baseline/effnet_m/loss.json
      hash: md5
      md5: 5e7f6203ec8c73431ad8c55f858fe4f1
      size: 343
    - path: baseline/effnet_m/model.pth
      hash: md5
      md5: 6c577529342c170152e22e66b7801085
      size: 212984427
  evaluate@effnet_m:
    cmd: "python -m src.evaluate  pipeline=baseline  model=effnet_m\n"
    deps:
    - path: baseline/effnet_m/model.pth
      hash: md5
      md5: 6c577529342c170152e22e66b7801085
      size: 212984427
    - path: data/split/test
      hash: md5
      md5: d7675a3f7fb90cbdfff2fa7fcaff688f.dir
      size: 34292589
      nfiles: 636
    - path: src/common.py
      hash: md5
      md5: eebdc02be491d1a283c895659a244fdc
      size: 3543
    - path: src/evaluate.py
      hash: md5
      md5: d5744aafc8efedc89a8d28a5f298a4f7
      size: 3495
    params:
      conf/config.yaml:
        base:
          image_res: 224
          seed: 42
        data:
          valset_path: data/split/val
          testset_path: data/split/test
        defaults:
        - pipeline: baseline
        - model: effnet_s
        - _self_
        evaluate:
          batch_size: 16
        train:
          alpha: 5.0
      conf/pipeline/baseline.yaml:
        out_dir: baseline/
        train:
          lr: 0.001
          epochs: 4
          batch_size: 16
        trainset_path: data/split/train
        tsft: false
    outs:
    - path: baseline/effnet_m/cm_data.csv
      hash: md5
      md5: 89024603dbfd544e70c9ea15a491f905
      size: 15231
    - path: baseline/effnet_m/metrics.json
      hash: md5
      md5: 8151dca0c2a49daea0bf22a3bdccbf9c
      size: 100
  evaluate@convnext:
    cmd: "python -m src.evaluate  pipeline=baseline  model=convnext\n"
    deps:
    - path: baseline/convnext/model.pth
      hash: md5
      md5: 94539927288e926eb083e085c36dcd49
      size: 350394259
    - path: data/split/test
      hash: md5
      md5: d7675a3f7fb90cbdfff2fa7fcaff688f.dir
      size: 34292589
      nfiles: 636
    - path: src/common.py
      hash: md5
      md5: eebdc02be491d1a283c895659a244fdc
      size: 3543
    - path: src/evaluate.py
      hash: md5
      md5: d5744aafc8efedc89a8d28a5f298a4f7
      size: 3495
    params:
      conf/config.yaml:
        base:
          image_res: 224
          seed: 42
        data:
          valset_path: data/split/val
          testset_path: data/split/test
        defaults:
        - pipeline: baseline
        - model: effnet_s
        - _self_
        evaluate:
          batch_size: 16
        train:
          alpha: 5.0
      conf/pipeline/baseline.yaml:
        out_dir: baseline/
        train:
          lr: 0.001
          epochs: 4
          batch_size: 16
        trainset_path: data/split/train
        tsft: false
    outs:
    - path: baseline/convnext/cm_data.csv
      hash: md5
      md5: 5efde3e288dfb6acfd4ead32843805d7
      size: 14523
    - path: baseline/convnext/metrics.json
      hash: md5
      md5: c7779b3f4caeefc8a6dda9db0875ad0b
      size: 101
  evaluate@effnet_s:
    cmd: "python -m src.evaluate  pipeline=baseline  model=effnet_s\n"
    deps:
    - path: baseline/effnet_s/model.pth
      hash: md5
      md5: 3a090dfb169cca63adc6d8e0fc501058
      size: 81596987
    - path: data/split/test
      hash: md5
      md5: d7675a3f7fb90cbdfff2fa7fcaff688f.dir
      size: 34292589
      nfiles: 636
    - path: src/common.py
      hash: md5
      md5: eebdc02be491d1a283c895659a244fdc
      size: 3543
    - path: src/evaluate.py
      hash: md5
      md5: d5744aafc8efedc89a8d28a5f298a4f7
      size: 3495
    params:
      conf/config.yaml:
        base:
          image_res: 224
          seed: 42
        data:
          valset_path: data/split/val
          testset_path: data/split/test
        defaults:
        - pipeline: baseline
        - model: effnet_s
        - _self_
        evaluate:
          batch_size: 16
        train:
          alpha: 5.0
      conf/pipeline/baseline.yaml:
        out_dir: baseline/
        train:
          lr: 0.001
          epochs: 4
          batch_size: 16
        trainset_path: data/split/train
        tsft: false
    outs:
    - path: baseline/effnet_s/cm_data.csv
      hash: md5
      md5: bc664ef65d791daa5a86c6d49a8d6aa4
      size: 15053
    - path: baseline/effnet_s/metrics.json
      hash: md5
      md5: b834309f17ae811def665f164d01cf38
      size: 99
